<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="org.ht.mapper.GoodsMapper">

	<!-- insert -->
	<insert id="product">
	  INSERT INTO Goods(g_num, g_name, g_kind, g_price, g_content, g_image, g_color, g_size, g_useyn, g_regdate)
	  VALUES (#{g_num}, #{g_name}, #{g_kind}, #{g_price}, #{g_content}, #{g_image}, #{g_color}, #{g_size}, #{g_useyn}, now())
	</insert>
	
	<!-- insert for images table -->
	<insert id="images">
	  INSERT INTO Images(g_num, g_image1, g_image2, g_image3)
	  VALUES (#{g_num}, #{g_image1}, #{g_image2}, #{g_image3})
	</insert>
	
		<select id="list" resultType="org.ht.model.GoodsVO">
				select *
				from Goods
				<if test="keyword != null">
					<choose>
						<otherwise>
						where g_name like concat('%',#{keyword},'%')
						OR  g_price like concat('%',#{keyword},'%')
						OR  g_image like concat('%',#{keyword},'%')
						OR  g_color like concat('%',#{keyword},'%')
						</otherwise>
					</choose>
			    </if>
			    order by g_name desc
  		</select>
  		
  		<select id="total" resultType="int">
  			select count(*) from Goods
  			<if test="keyword != null">
						
			<choose>
				<when test="type=='T'.toString()">
					 where g_name like concat('%',#{keyword},'%')
				</when>
				<otherwise>
					where g_name like concat('%',#{keyword},'%')
			      <!-- OR  product_id like concat('%',#{keyword},'%') -->
				</otherwise>
			
			</choose>

			</if>
  		</select>
	
  </mapper>